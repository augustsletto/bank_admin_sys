{% extends "baseTemplate.html" %}
{% set active_page = "add_account" %}
{% block title %}Add Account{% endblock %}

{% block content %}






<div class="container-fluid mt-4">
    

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="alert-container">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div class="row g-3">

    <div class="row g-3">

        
        <div class="col-md-4">
            <div class="card h-100">
                <h5>Customer Information</h5>
                <div class="mt-3">
                    <h3>{{ customer.given_name }} {{ customer.surname }}</h3>
                    <p class="mb-1"><strong>Customer ID:</strong> {{ customer.id }}</p>
                    <p><strong>Total Accounts:</strong> {{ total_accounts }}</p>
                </div>

                <div class="d-grid mt-4">
                    <a href="{{ url_for('main.management') }}" class="btn btn-outline-light">Back to Management</a>
                </div>
            </div>
        </div>

        
        <div class="col-md-8">
            <div class="card">
                <h5 class="text-center mb-4">Create a New Account</h5>
                <p class="text-center text-light">For {{ customer.given_name }} {{ customer.surname }}</p>
                
                
                

                <form method="POST" novalidate>
                    {{ form.hidden_tag() }}

                    <div class="mb-4">
                        <label class="form-label">Account Type</label>
                        {{ form.account_type(class="form-select custom-dropdown") }}
                    </div>

                    <div class="mb-4">
                        <label class="form-label">Initial Balance</label>
                        {{ form.balance(class="form-control custom-input", placeholder="Enter initial balance") }}
                    </div>

                    <button type="submit" class="btn btn-primary w-100">Create Account</button>
                </form>
            </div>
        </div>

        
        <div class="col-md-12 mt-4">
            <div class="card text-center">
                <h5>Account Preview</h5>
                <div class="creditcard p-3 mx-auto mt-3" id="creditCard" style="max-width: 350px;">
                    <div class="text-end pt-2 pe-3">
                        <img src="/static/images/V.D-e36aebe0.png" alt="Visa Logo" id="visalogo">
                    </div>

                    <div class="my-4 px-2 pt-3">
                        •••• •••• •••• <span id="card-num-4"> 3849</span>
                    </div>

                    <div class="row">
                        <div class="col text-start">{{ customer.given_name }} {{ customer.surname }}</div>
                        <div class="col text-end">22/11</div>
                    </div>
                </div>

                <div class="d-flex justify-content-center mt-4">
                    <button class="btn color-btn btn-blue me-2" onclick="changeCardColor('#5641f5', '#11075f')"></button>
                    <button class="btn color-btn btn-green me-2" onclick="changeCardColor('#2ecc71', '#145a32')"></button>
                    <button class="btn color-btn btn-red me-2" onclick="changeCardColor('#e74c3c', '#7b241c')"></button>
                    <button class="btn color-btn btn-gold me-2" onclick="changeCardColor('#f1c40f', '#b7950b')"></button>
                    <button class="btn color-btn btn-silver" onclick="changeCardColor('#bdc3c7', '#7f8c8d')"></button>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    function changeCardColor(primary, secondary) {
        document.getElementById('creditCard').style.background = `linear-gradient(135deg, ${primary}, ${secondary})`;
    }
</script>


{% endblock %}
